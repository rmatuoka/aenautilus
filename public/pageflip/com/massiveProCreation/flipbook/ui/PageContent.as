package com.massiveProCreation.flipbook.ui{	// IMPORTS	import com.massiveProCreation.events.CustomEvent;		import fl.motion.CustomEase;		import flash.display.Loader;	import flash.display.Sprite;	import flash.events.Event;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.text.Font;	import flash.text.StyleSheet;	import flash.text.TextField;	import flash.text.TextFormat;
		public class PageContent extends Sprite	{		// VARIABLES		private var _settings:Object = new Object();		private var _tf:TextFormat = new TextFormat();		private var _loader:URLLoader;		private var _fontLoader:Loader = new Loader();		private var _fonts:Array = [];				public function PageContent(text:String, width:int, height:int, textColor:uint)		{			super();			// here we setup the width and height of the content field also we assign the atrributes to our variable			_settings = {text:text, width:width, height:height, textColor:textColor};			this.title.width = _settings.width;			this.title.height = _settings.height;			// next we load the font that we are going to use, it will be a MyriadPro font			_fontLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, fontLoaded, false, 0, true);			_fontLoader.load(new URLRequest("fonts/MyriadPro.swf"));			this.addEventListener(Event.ADDED_TO_STAGE, added, false, 0, true);		}		private function added(e:Event):void{			stage.addEventListener(Event.RESIZE, onResize, false, 0, true);			this.addEventListener(Event.REMOVED_FROM_STAGE, removed, false, 0, true);			this.dispatchEvent(new CustomEvent(CustomEvent.ADJUST));		}		private function removed(e:Event):void {			stage.removeEventListener(Event.RESIZE, onResize);		}		private function onResize(e:Event):void {			this.dispatchEvent(new CustomEvent(CustomEvent.ADJUST));		}		private function fontLoaded(e:Event):void {			// when the dont is loaded we parsse the content to the array			_fonts = Font.enumerateFonts(false);			_fonts.sortOn("fontName", Array.CASEINSENSITIVE);			// next we load css style sheat 			_loader = new URLLoader();			_loader.addEventListener(Event.COMPLETE, setup, false, 0, true);			_loader.load(new URLRequest("pageContent.css"));		}		private function setup(e:Event):void {			// whe the style sheat is loaded we assign it to our text field			title.embedFonts = true;						var ss:StyleSheet = new StyleSheet();			ss.parseCSS(_loader.data);			title.styleSheet = ss;			// then we change some tax in the tags to be more complex and work better			_settings.text = String(_settings.text).split("<b>").join('<span class="bold">');			_settings.text = String(_settings.text).split("</b>").join('</span>');			_settings.text = String(_settings.text).split("<i>").join('<span class="italic">');			_settings.text = String(_settings.text).split("</i>").join('</span>');			_settings.text = String(_settings.text).split("<u>").join('<span class="underline">');			_settings.text = String(_settings.text).split("</u>").join('</span>');					// at the end we assign the text to the text field.			title.text = _settings.text;				}	}}